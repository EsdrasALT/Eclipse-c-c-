#include <stdio.h>
#include <stdlib.h>

typedef struct {
	int nome[40];
	int codigo;
	float preco;
	int quantidade;
}Produto;

void menu();
int solicitarQuantidadeTotalProdutos ();
void excluirEstruturaCriada (Produto *produtos);
Produto* criarEstruturaDinamicamente(int tamanho);

int main(){
	setbuf(stdout, NULL);

	Produto *produtos = NULL;
	int quantidadeTotalProdutos=0;

	menu();

	//Liberar a memoria (desalocar)
	free(produtos);
	produtos = NULL;
	//Medida de segurança

	return 0;

}

void menu(){
	char opcao;

	printf("-------------Bem vindo-------------------\n\n");

	do {
		printf("\nEscolha uma das opções abaixo:\n");
		printf("A - Criar estrutura para preenchimento\n");
		printf("B - Preencher dados\n");
		printf("C - Exibir produtos com estoque zerado\n");
		printf("D - Exibir produtos em estoque\n");
		printf("E - Finalizar\n");
		printf("Digite sua opção: ");
		scanf(" %c", &opcao);

		switch(opcao) {
			case 'A':
				quantidadeTotalProdutos = solicitarQuantidadeTotalProdutos();
				produtos = criarEstruturaDinamicamente (quantidadeTotalProdutos);
				break;
			case 'B':
				printf("Você escolheu a opção B.\n\n");
				break;
			case 'C':
				printf("Você escolheu a opção C.\n\n");
				break;
			case 'D':
				printf("Você escolheu a opção D.\n\n");
				break;
			case 'E':
				printf("Você escolheu a opção E.\n\n");
				break;
			default:
				printf("Opção inválida!\n\n");
				break;
		}
	} while (opcao != 'E');

	printf("\n----------------Fim do Programa------------------");

}

int solicitarQuantidadeTotalProdutos (){

	int qtde;

	do {
		printf("Informe a quantidade total dos produtos que ira cadastrar\n"
				"Minimo de 1 | Maximo de 10:  ");
		scanf("%d", &qtde);
		if (qtde <= 0 || qtde > 10){
			printf("\nQuantidade invalida!\n");
		}
	} while (qtde <= 0 || qtde > 10);

	return qtde;
}

void excluirEstruturaCriada (Produto * produtos){
	if (produtos != NULL){
		free(produtos);
		produtos = NULL;
	}
}

Produto* criarEstruturaDinamicamente(int tamanho){
	Produto *produtos = (Produto *) malloc (tamanho * sizeof(Produto));
	return produtos;
}
